# This file configures Nginx to listen on the dynamic port
# provided by Cloud Run via the $PORT environment variable.

# Use environment variable $PORT, which is injected by Cloud Run (default: 8080)
# We use a default port of 8080 if $PORT is somehow unset.
listen ${PORT:-8080};

server {
    # Nginx needs to listen on the host 0.0.0.0, which is implied by 'listen'
    # but we'll use 8080 as the port for clarity inside the container.
    # The 'listen' directive above uses the dynamic port.
    
    server_name localhost;
    
    # Set the root directory for your application's static files
    root /usr/share/nginx/html;
    
    # Try file exists, otherwise fall back to index.html (important for SPA routing)
    location / {
        try_files $uri $uri/ /index.html;
    }
}